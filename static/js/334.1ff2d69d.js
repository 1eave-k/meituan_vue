"use strict";(self["webpackChunkvue3_waimai"]=self["webpackChunkvue3_waimai"]||[]).push([[334],{3094:function(){},7984:function(){},3404:function(e,t,n){n.d(t,{ZP:function(){return g},x_:function(){return d}});var l=n(9812),r=n(1882),a=n(2469),i=n(4391),o=n(3206),s=n(4874);const[u,c]=(0,r["do"])("cell"),d={tag:(0,a.SQ)("div"),icon:String,size:String,title:a.Or,value:a.Or,label:a.Or,center:Boolean,isLink:Boolean,border:a.J5,required:Boolean,iconPrefix:String,valueClass:a.Vg,labelClass:a.Vg,titleClass:a.Vg,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},f=(0,i.l7)({},d,o.g2);var g=(0,l.aZ)({name:u,props:f,setup(e,{slots:t}){const n=(0,o.yj)(),r=()=>{const n=t.label||(0,i.Xq)(e.label);if(n)return(0,l.Wm)("div",{class:[c("label"),e.labelClass]},[t.label?t.label():e.label])},a=()=>{var n;if(t.title||(0,i.Xq)(e.title)){const a=null==(n=t.title)?void 0:n.call(t);if(Array.isArray(a)&&0===a.length)return;return(0,l.Wm)("div",{class:[c("title"),e.titleClass],style:e.titleStyle},[a||(0,l.Wm)("span",null,[e.title]),r()])}},u=()=>{const n=t.value||t.default,r=n||(0,i.Xq)(e.value);if(r)return(0,l.Wm)("div",{class:[c("value"),e.valueClass]},[n?n():(0,l.Wm)("span",null,[e.value])])},d=()=>t.icon?t.icon():e.icon?(0,l.Wm)(s.JO,{name:e.icon,class:c("left-icon"),classPrefix:e.iconPrefix},null):void 0,f=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return(0,l.Wm)(s.JO,{name:t,class:c("right-icon")},null)}};return()=>{var r;const{tag:i,size:o,center:s,border:g,isLink:v,required:p}=e,m=null!=(r=e.clickable)?r:v,b={center:s,required:p,clickable:m,borderless:!g};return o&&(b[o]=!!o),(0,l.Wm)(i,{class:c(b),role:m?"button":void 0,tabindex:m?0:void 0,onClick:n},{default:()=>{var e;return[d(),a(),u(),f(),null==(e=t.extra)?void 0:e.call(t)]}})}}})},3219:function(e,t,n){n.d(t,{bL:function(){return a}});var l=n(2473),r=n(3404);const a=(0,l.n)(r.ZP)},6292:function(e,t,n){n.d(t,{M:function(){return a}});var l=n(9812);let r=0;function a(){const e=(0,l.FN)(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++r}`}},3206:function(e,t,n){n.d(t,{BC:function(){return a},g2:function(){return r},yj:function(){return i}});var l=n(9812);const r={to:[String,Object],url:String,replace:Boolean};function a({to:e,url:t,replace:n,$router:l}){e&&l?l[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function i(){const e=(0,l.FN)().proxy;return()=>a(e)}},7454:function(e,t,n){n.d(t,{ZP:function(){return I},Mv:function(){return q}});var l=n(9812),r=n(521),a=n(1882),i=n(2469),o=n(4391),s=n(8336),u=n(1417),c=n(2792);function d(e){return Array.isArray(e)?!e.length:0!==e&&!e}function f(e,t){if(d(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function g(e,t){return new Promise((n=>{const l=t.validator(e,t);(0,o.tI)(l)?l.then(n):n(l)}))}function v(e,t){const{message:n}=t;return(0,o.mf)(n)?n(e,t):n||""}function p({target:e}){e.composing=!0}function m({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function b(e,t){const n=(0,c.oD)();e.style.height="auto";let l=e.scrollHeight;if((0,o.Kn)(t)){const{maxHeight:e,minHeight:n}=t;void 0!==e&&(l=Math.min(l,e)),void 0!==n&&(l=Math.max(l,n))}l&&(e.style.height=`${l}px`,(0,c.kn)(n))}function h(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}function y(e){return[...e].length}function k(e,t){return[...e].slice(0,t).join("")}var S=n(3404),W=n(8586),w=n(6292),x=n(4779),C=n(4874),V=n(3219);const[B,M]=(0,a["do"])("field"),q={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:i.Or,formatter:Function,clearIcon:(0,i.SQ)("clear"),modelValue:(0,i.SI)(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:(0,i.SQ)("focus"),formatTrigger:(0,i.SQ)("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},P=(0,o.l7)({},S.x_,q,{rows:i.Or,type:(0,i.SQ)("text"),rules:Array,autosize:[Boolean,Object],labelWidth:i.Or,labelClass:i.Vg,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var I=(0,l.aZ)({name:B,props:P,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const a=(0,w.M)(),i=(0,r.qj)({status:"unvalidated",focused:!1,validateMessage:""}),S=(0,r.iH)(),B=(0,r.iH)(),q=(0,r.iH)(),{parent:P}=(0,W.NB)(s.WN),I=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},O=t=>(0,o.Xq)(e[t])?e[t]:P&&(0,o.Xq)(P.props[t])?P.props[t]:void 0,F=(0,l.Fl)((()=>{const t=O("readonly");if(e.clearable&&!t){const t=""!==I(),n="always"===e.clearTrigger||"focus"===e.clearTrigger&&i.focused;return t&&n}return!1})),A=(0,l.Fl)((()=>q.value&&n.input?q.value():e.modelValue)),z=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===i.status)return;let{value:e}=A;if(t.formatter&&(e=t.formatter(e,t)),!f(e,t))return i.status="failed",void(i.validateMessage=v(e,t));if(t.validator){if(d(e)&&!1===t.validateEmpty)return;return g(e,t).then((n=>{n&&"string"===typeof n?(i.status="failed",i.validateMessage=n):!1===n&&(i.status="failed",i.validateMessage=v(e,t))}))}}))),Promise.resolve()),L=()=>{i.status="unvalidated",i.validateMessage=""},E=()=>t("endValidate",{status:i.status,message:i.validateMessage}),$=(n=e.rules)=>new Promise((l=>{L(),n?(t("startValidate"),z(n).then((()=>{"failed"===i.status?(l({name:e.name,message:i.validateMessage}),E()):(i.status="passed",l(),E())}))):l()})),X=t=>{if(P&&e.rules){const{validateTrigger:n}=P.props,l=(0,o.qo)(n).includes(t),r=e.rules.filter((e=>e.trigger?(0,o.qo)(e.trigger).includes(t):l));r.length&&$(r)}},J=t=>{var n;const{maxlength:l}=e;if((0,o.Xq)(l)&&y(t)>+l){const e=I();if(e&&y(e)===+l)return e;const r=null==(n=S.value)?void 0:n.selectionEnd;if(i.focused&&r){const e=[...t],n=e.length-+l;return e.splice(r-n,n),e.join("")}return k(t,+l)}return t},T=(n,l="onChange")=>{const r=n;n=J(n);const a=y(r)-y(n);if("number"===e.type||"digit"===e.type){const t="number"===e.type;n=(0,u.uf)(n,t,t)}let s=0;if(e.formatter&&l===e.formatTrigger){const{formatter:t,maxlength:l}=e;if(n=t(n),(0,o.Xq)(l)&&y(n)>+l&&(n=k(n,+l)),S.value&&i.focused){const{selectionEnd:e}=S.value,n=k(r,e);s=y(t(n))-y(n)}}if(S.value&&S.value.value!==n)if(i.focused){let{selectionStart:e,selectionEnd:t}=S.value;if(S.value.value=n,(0,o.Xq)(e)&&(0,o.Xq)(t)){const l=y(n);a?(e-=a,t-=a):s&&(e+=s,t+=s),S.value.setSelectionRange(Math.min(e,l),Math.min(t,l))}}else S.value.value=n;n!==e.modelValue&&t("update:modelValue",n)},j=e=>{e.target.composing||T(e.target.value)},D=()=>{var e;return null==(e=S.value)?void 0:e.blur()},N=()=>{var e;return null==(e=S.value)?void 0:e.focus()},H=()=>{const t=S.value;"textarea"===e.type&&e.autosize&&t&&b(t,e.autosize)},Z=e=>{i.focused=!0,t("focus",e),(0,l.Y3)(H),O("readonly")&&D()},Q=e=>{i.focused=!1,T(I(),"onBlur"),t("blur",e),O("readonly")||(X("onBlur"),(0,l.Y3)(H),(0,c.pe)())},Y=e=>t("clickInput",e),R=e=>t("clickLeftIcon",e),_=e=>t("clickRightIcon",e),K=e=>{(0,c.PF)(e),t("update:modelValue",""),t("clear",e)},G=(0,l.Fl)((()=>"boolean"===typeof e.error?e.error:!(!P||!P.props.showError||"failed"!==i.status)||void 0)),U=(0,l.Fl)((()=>{const e=O("labelWidth"),t=O("labelAlign");if(e&&"top"!==t)return{width:(0,u.Nn)(e)}})),ee=n=>{const l=13;if(n.keyCode===l){const t=P&&P.props.submitOnEnter;t||"textarea"===e.type||(0,c.PF)(n),"search"===e.type&&D()}t("keypress",n)},te=()=>e.id||`${a}-input`,ne=()=>i.status,le=()=>{const t=M("control",[O("inputAlign"),{error:G.value,custom:!!n.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(n.input)return(0,l.Wm)("div",{class:t,onClick:Y},[n.input()]);const r={id:te(),ref:S,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:O("disabled"),readonly:O("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${a}-label`:void 0,onBlur:Q,onFocus:Z,onInput:j,onClick:Y,onChange:m,onKeypress:ee,onCompositionend:m,onCompositionstart:p};return"textarea"===e.type?(0,l.Wm)("textarea",r,null):(0,l.Wm)("input",(0,l.dG)(h(e.type),r),null)},re=()=>{const t=n["left-icon"];if(e.leftIcon||t)return(0,l.Wm)("div",{class:M("left-icon"),onClick:R},[t?t():(0,l.Wm)(C.JO,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ae=()=>{const t=n["right-icon"];if(e.rightIcon||t)return(0,l.Wm)("div",{class:M("right-icon"),onClick:_},[t?t():(0,l.Wm)(C.JO,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ie=()=>{if(e.showWordLimit&&e.maxlength){const t=y(I());return(0,l.Wm)("div",{class:M("word-limit")},[(0,l.Wm)("span",{class:M("word-num")},[t]),(0,l.Uk)("/"),e.maxlength])}},oe=()=>{if(P&&!1===P.props.showErrorMessage)return;const t=e.errorMessage||i.validateMessage;if(t){const e=n["error-message"],r=O("errorMessageAlign");return(0,l.Wm)("div",{class:M("error-message",r)},[e?e({message:t}):t])}},se=()=>{const t=O("labelWidth"),r=O("labelAlign"),i=O("colon")?":":"";return n.label?[n.label(),i]:e.label?(0,l.Wm)("label",{id:`${a}-label`,for:n.input?void 0:te(),onClick:e=>{(0,c.PF)(e),N()},style:"top"===r&&t?{width:(0,u.Nn)(t)}:void 0},[e.label+i]):void 0},ue=()=>[(0,l.Wm)("div",{class:M("body")},[le(),F.value&&(0,l.Wm)(C.JO,{ref:B,name:e.clearIcon,class:M("clear")},null),ae(),n.button&&(0,l.Wm)("div",{class:M("button")},[n.button()])]),ie(),oe()];return(0,x.F)({blur:D,focus:N,validate:$,formValue:A,resetValidation:L,getValidationStatus:ne}),(0,l.JJ)(W.F1,{customValue:q,resetValidation:L,validateWithTrigger:X}),(0,l.YP)((()=>e.modelValue),(()=>{T(I()),L(),X("onChange"),(0,l.Y3)(H)})),(0,l.bv)((()=>{T(I(),e.formatTrigger),(0,l.Y3)(H)})),(0,W.OR)("touchstart",K,{target:(0,l.Fl)((()=>{var e;return null==(e=B.value)?void 0:e.$el}))}),()=>{const t=O("disabled"),r=O("labelAlign"),a=re(),i=()=>{const e=se();return"top"===r?[a,e].filter(Boolean):e||[]};return(0,l.Wm)(V.bL,{size:e.size,class:M({error:G.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:U.value,valueClass:M("value"),titleClass:[M("label",[r,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:a&&"top"!==r?()=>a:null,title:i,value:ue,extra:n.extra})}}})},5058:function(e,t,n){n.d(t,{gN:function(){return a}});var l=n(2473),r=n(7454);const a=(0,l.n)(r.ZP)},8580:function(e,t,n){n(1958),n(368),n(6742)}}]);
//# sourceMappingURL=334.1ff2d69d.js.map